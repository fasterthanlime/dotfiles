##### Core UX #####
set -g mouse on
set -g focus-events on
set -g mode-keys vi

# Escape timing
# You had 50 to avoid WSL printing '0;10;1c'. Keep that unless you're sure you can go to 0.
set -sg escape-time 50
# (If you don't hit that issue, 0 feels snappier: set -sg escape-time 0)

##### Terminal / colors / clipboard #####
# tmux-256color enables italics vs screen-256color
set -g default-terminal "tmux-256color"

# True color (24-bit) for terminals advertising 256-color variants
set -ag terminal-overrides ",*256col*:colors=256:Tc"

# OSC 52 clipboard handling (works better with things like mosh; also fine generally)
set -ag terminal-overrides "vte*:XT:Ms=\\E]52;c;%p2%s\\7,xterm*:XT:Ms=\\E]52;c;%p2%s\\7"

# OSC52 (copy) - match outer terminal names
set -ag terminal-overrides ",xterm*:Ms=\\E]52;c;%p2%s\\7"
set -ag terminal-overrides ",wezterm*:Ms=\\E]52;c;%p2%s\\7"
set -ag terminal-overrides ",screen*:Ms=\\E]52;c;%p2%s\\7"

# Enable OSC 52 clipboard integration
set -g set-clipboard on

# Allow escape sequences (OSC) to pass through to the outer terminal (WezTerm, etc.)
set -g allow-passthrough on

# Bracketed paste (only if the app enabled it)
bind-key ] paste-buffer -p

##### Titles #####
set -g set-titles on
set -g set-titles-string "#{pane_title}"

##### Mouse select -> copy (your bindings) #####
bind -T copy-mode    MouseDragEnd1Pane send -X copy-pipe-and-cancel "tmux load-buffer -w -"
bind -T copy-mode-vi MouseDragEnd1Pane send -X copy-pipe-and-cancel "tmux load-buffer -w -"

##### Windows / panes #####
# New windows/panes open in current directory
bind c   new-window -c "#{pane_current_path}"

# Split a-la screen
bind '"' split-window -v -c "#{pane_current_path}"
bind %   split-window -h -c "#{pane_current_path}"

##### Layout behavior #####
# "Best practices" had this ON; you had it OFF. Pick one:
setw -g aggressive-resize on
# (If you dislike aggressive resizing when clients attach/detach, switch to: setw -g aggressive-resize off)

##### Plugins #####
set -g @plugin "tmux-plugins/tpm"
set -g @plugin "tmux-plugins/tmux-sensible"
set -g @plugin "arcticicestudio/nord-tmux"
run "~/.tmux/plugins/tpm/tpm"
