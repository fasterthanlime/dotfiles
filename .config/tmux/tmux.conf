##### Core UX #####
set -g mouse on
set -g focus-events on
set -g mode-keys vi

# Escape timing (keeps your WSL workaround behavior)
set -sg escape-time 50

##### Terminal / colors #####
# tmux-256color enables italics vs screen-256color
set -g default-terminal "tmux-256color"

# True color (24-bit) for terminals advertising 256-color variants
set -ag terminal-overrides ",*256col*:colors=256:Tc"

# OSC52 clipboard capability for common outer terminals (yours is xterm-256color over SSH)
set -ag terminal-overrides ",xterm*:Ms=\\E]52;c;%p2%s\\7"
set -ag terminal-overrides ",screen*:Ms=\\E]52;c;%p2%s\\7"
set -ag terminal-overrides ",wezterm*:Ms=\\E]52;c;%p2%s\\7"
set -ag terminal-overrides ",ghostty*:Ms=\\E]52;c;%p2%s\\7"
set -ag terminal-overrides ",vte*:Ms=\\E]52;c;%p2%s\\7"

##### Titles #####
set -g set-titles on
set -g set-titles-string "#{pane_title}"

##### Mouse select -> copy (use tmuxâ€™s built-in copy path) #####
unbind -T copy-mode    MouseDragEnd1Pane
unbind -T copy-mode-vi MouseDragEnd1Pane
bind   -T copy-mode    MouseDragEnd1Pane send -X copy-selection-and-cancel
bind   -T copy-mode-vi MouseDragEnd1Pane send -X copy-selection-and-cancel

##### Bracketed paste #####
bind-key ] paste-buffer -p

##### Windows / panes #####
# New windows/panes open in current directory
bind c   new-window -c "#{pane_current_path}"

# Split a-la screen
bind '"' split-window -v -c "#{pane_current_path}"
bind %   split-window -h -c "#{pane_current_path}"

##### Layout behavior #####
setw -g aggressive-resize on

##### Plugins #####
set -g @plugin "tmux-plugins/tpm"
set -g @plugin "tmux-plugins/tmux-sensible"
set -g @plugin "arcticicestudio/nord-tmux"
run "~/.tmux/plugins/tpm/tpm"

##### Re-assert post-plugin overrides (IMPORTANT) #####
# Clipboard: explicitly send to the outer terminal via OSC52
set -s set-clipboard external

# Allow apps inside tmux to pass OSC through (useful w/ modern terminals)
set -g allow-passthrough on
